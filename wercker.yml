box: wercker/nodejs
build:
  steps:
    - aussiegeek/install-phantomjs
    - script:
        name: chown for npm
        code: sudo chown -R $USER /usr/local
    - npm-install:
        options: -g -f component@1.0.0-rc5 mocha-phantomjs
    - script:
        name: github auth
        code: |
          export GITHUB_USERNAME=6f6bb632b5d52da1ef47eb9c0db2477c223520fb
          export GITHUB_PASSWORD=x-oauth-basic
    - script:
        name: make test
        code: make test
  after-steps:
    - hipchat-notify:
        token: $HIPCHAT_TOKEN
        room-id: $HIPCHAT_ROOM
        from-name: wercker
